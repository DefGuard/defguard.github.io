---
import Navigation from "../components/base/Navigation.astro";
import HomeSection from "../components/home/HomeSection.astro";
import ProductLayout from "../layouts/ProductLayout.astro";
import Testimonials from "./_home/components/client-side/Testimonials/Testimonials";
import TestimonialsGrid from "./_home/components/client-side/TestimonialsGrid/TestimonialsGrid.astro";
import type { TestimonialData } from "./_home/components/client-side/Testimonials/type";
import { testimonialSchema } from "./_home/components/client-side/Testimonials/type";
import FlexibleIdentitySection from "./_home/components/FlexibleIdentity/FlexibleIdentitySection.astro";
import HomeHeader from "./_home/components/HomeHeader.astro";
import Roadmap from "./_home/components/Roadmap/Roadmap.astro";
import FeatureCapsules from "./_home/components/FeatureCapsules.astro";
import CaseCapsules from "./_home/components/CaseCapsules.astro";
import FlexibleSection from "../components/FlexibleSection.astro";
import signinwith from "/public/images/data/signinwith.png";
import enrollment from "/public/images/data/enrollment-screen.png";
import api from "/public/images/data/api.png";
import Image from "astro/components/Image.astro";
import YouTubeVideo from "../components/video/YouTubeVideo.astro";
import CTASection from "../components/CTASection.astro";
import TextDivider from "../components/TextDivider.astro";
import TrustedBy from "./_home/components/TrustedBy.astro";
import HeaderSection from "../components/HeaderSection.astro";
import ImageURL from "../components/image/ImageURL.astro";
import ImageCarousel from "../components/image/ImageCarousel.astro";
const testimonialsImportData = await Astro.glob("../data/home/testimonials/**/*.md");

const testimonialsData: Array<TestimonialData> = testimonialsImportData.map((val) => {
  const toValidate = { ...val.frontmatter, markdownRaw: val.rawContent() };
  const res = testimonialSchema.parse(toValidate);
  return res;
});

const title = "defguard - Zero-Trust WireGuard® 2FA/MFA VPN";
const featuredImage =
  "github.com/DefGuard/defguard.github.io/raw/main/public/images/product/core/hero-image.png";
const imageWidth = "1920";
const imageHeight = "1080";
const url = "https://defguard.net/";
const tags = [
  "defguard",
  "open source",
  "sso & vpn",
  "vpn",
  "mfa",
  "2fa",
  "mfa/2fa",
  "WireGuard®",
  "ldap",
  "openldap",
  "postgresql",
  "postgres",
  "openid",
  "totp",
  "webauthn",
  "opensense",
  "freebsd",
  "rust",
  "secure",
  "desktop client",
  "desktop",
  "yubikey",
  "teonite",
  "docker",
  "kubernetes",
  "k8s",
];
---

<ProductLayout
  title={title}
  featuredImage={featuredImage}
  imageWidth={imageWidth}
  imageHeight={imageHeight}
  url={url}
  tags={tags}
>
  <Navigation activeSlug="/" />

  <main id="home-page">
    <HomeHeader
      trustedBy={false}
      title="Enterprise VPN with full control and transparency"
      description="Defguard is the enterprise VPN solution built for IT leaders who demand security, visibility, and peace of mind."
      buttons={[
        { name: "Book a Demo", link: "/book-a-demo?utm_source=landing" },
        { name: "Quick Install Guide", link: "https://docs.defguard.net/getting-started/one-line-install" }
      ]}
    />

    <FeatureCapsules
      header="Why security aware organizations choose Defguard VPN"
      features={[
         { 
          title: "True VPN MFA", 
          description: "The only VPN solution that implements multi-factor authentication directly at the WireGuard® protocol level.", 
          icon: "lni-rocket",
          linkText: "Defguard MFA Architecture",
          linkUrl: "https://docs.defguard.net/in-depth/architecture/architecture"
        },
        { 
          title: "Ultimate Security", 
          description: "Written in Rust, built around WireGuard® and with components designed to be secure, fully auditable with open source code on GitHub" ,
          icon: "lni-shield",
          linkText: "Explore Secure Architecture",
          linkUrl: "https://docs.defguard.net/in-depth/architecture"
        }, 
        { 
          title: "Enterprise integrations", 
          description: 
          "External OpenID providers; Google, Microsoft, Zitadel, Keycloak, Okta, JumpCloud and more. Integrates with LDAP, Active Directory and Microsoft Entra ID.", 
          icon: "lni-apartment",
          linkText: "Learn about OpernID Providers",
          linkUrl: "https://docs.defguard.net/admin-and-features/external-openid-providers"
          // linkTarget: "_blank"
        },
        { 
          title: "Privacy and Transparency", 
          description: 
          "No third-party dependencies required, no metadata leaves your infrastructure, full control over deployment and configuration.", 
          icon: "lni-lock",
          linkText: "Talk to our experts",
          linkUrl: "/book-a-demo?utm_source=landing"
        },
    
        { 
          title: "Enables NIS2 compliance", 
          description: "True WireGuard® MFA implemented in protocol layer, easy to use with Defguad VPN desktop client. Defguard is NIS2 compliant.", 
          icon: "lni-certificate",
          linkText: "VPN Level 2FA / MFA",
          linkUrl: "https://docs.defguard.net/admin-and-features/wireguard/multi-factor-authentication-mfa-2fa" 
        },
       
        { 
          title: "European", 
          description: "Based in Poland and backed by European investors, Defguard operates entirely under EU law  ensuring full compliance with European security standards and zero foreign legal exposure.", 
          icon: "lni-world",
          linkText: "See media coverage",
          linkUrl: "https://defguard.net/press/"
        }
      ]}
    />
  

    <TrustedBy forceScroll={true} />

<!-- 



    Section Main



-->

    <HeaderSection
      title="True VPN multi-factor authentication"
      description="Defguard is the only VPN solution that implements multi-factor authentication directly at the WireGuard® protocol level, providing true connection-level security that goes beyond traditional application-layer MFA."
      variant="gray"
    />
    <FlexibleSection
      id="connection-level-mfa"
      variant="gray"
      theme="light"
    >
      <div slot="left">
        <h3>Why connection-level MFA matters</h3>
        <ul>
          <li><strong>True protocol security</strong> - MFA is enforced at the VPN connection level, not just the web interface</li>
          <li><strong>Zero bypass vulnerabilities</strong> - attackers can't circumvent MFA by exploiting application layers</li>
          <li><strong>Compliance ready</strong> - meets NIS2 and other regulatory requirements for VPN-level authentication</li>
        </ul>
        <p>
          <strong>Industry first</strong> Defguard is the only VPN solution that brings enterprise-grade MFA directly to the WireGuard® protocol.
        </p>
        
      </div>

      <div slot="right">
        <YouTubeVideo 
          videoId="KdyZoAlBb9k"
          title="Defguard MFA Demonstration"
          showControls={true}
          allowFullscreen={true}
        />
      </div>
    </FlexibleSection>

    <HeaderSection
      title="WireGuard® VPN Speed and Security"
      description="WireGuard® is a game-changer in VPN technology it's fast, lightweight, and secure."
      variant="gray"
    />
    <FlexibleSection
      id="security-features"
      variant="gray"
      theme="light"
    >
      <div slot="left">
        <p>
          <ImageURL src="/images/landing/wireguard.png" alt="WireGuard® logo" />
        </p>
        <h3>What makes WireGuard® best in class</h3>
        <ul>
          <li><strong>Fastest connections</strong> - up to 3x faster than OpenVPN</li>
          <li><strong>Lower attack surface</strong> - only ~4,000 lines of code</li>
          <li><strong>Mobile reliability</strong> - better for laptops, phones, roaming clients</li>
        </ul>
        <p>
          <strong>Make it enterprise-grade</strong> with Defguard — everything you need to run WireGuard securely at scale.
        </p>
      </div>

      <div slot="right">
        <p>
          <ImageURL src="/images/landing/defguard.png" alt="defguard logo" />
        </p>
        <h3>What Defguard adds</h3>
        <ul>
          <li><strong>Built-in MFA</strong> — the only WireGuard® VPN with protocol-level multi-factor authentication</li>
          <li><strong>User and device management</strong> — onboarding flows, config syncs, RBAC, ACLs</li>
          <li><strong>Live config updates</strong> — update groups, routes, and policies instantly</li>
          <li><strong>Real-time visibility</strong> — audit logs and integration with your SIEM</li>
          <li><strong>Client enforcement</strong> — restrict use to <a href="https://defguard.net/client">official Defguard clients</a> for better control</li>
        </ul>
      </div>
    </FlexibleSection>

    <!-- <HeaderSection
      title="Modern VPN Protocol. Now Enterprise-Ready."
      description="WireGuard gives you speed and simplicity — Defguard gives you everything else you need to run it securely at scale."
      variant="gray"
    /> -->

    <!-- <CTASection
      showBorder={true}
      title="Ready to Implement Enterprise-Grade WireGuard® VPN?"
      description="See how Defguard fits into your zero-trust architecture and existing infrastructure."
      buttonText="See Defguard Server Features"
      buttonLink="/server?utm_source=landing"
      id="cta-documentation"
      variant="gray"
    /> -->

<!-- 



    Section Enrollment



-->

    <HeaderSection
      title="Secure and fast remote users enrollment."
      description="Regardless of your configuration Defguard helps you to enroll and onboard your users in most secure and convenient ways."
      variant="white"
    />

    <FlexibleSection
      leftRatio={0.4}
      id="security-features"
      variant="white"
      theme="light"
    >
      <div slot="left">
        <p>
          Defguard helps you to enroll and onboard your users in most secure and convenient ways.
          <ul>
            <li>With Defguard desktop client enrollment.</li>
            <li>With web based (in browser) secure enrollment process.</li>
          </ul>
        </p>
      </div>

      <div slot="right">
        <ImageCarousel
          src="/images/landing/enrollment/data-verification.png,/images/landing/enrollment/create-password.png,/images/landing/enrollment/configure-mfa.png" alt="Simple Enrollment Process"
          interval={3}
          autoplay={true}
        />
      </div>
    </FlexibleSection>

    <CTASection
      showBorder={true}
      title="Ready to Implement Enterprise-Grade WireGuard® VPN?"
      description="See how Defguard fits into your zero-trust architecture and existing infrastructure."
      buttonText="See Client Features"
      buttonLink="/client?utm_source=landing"
      id="cta-documentation"
      variant="white"
    />

<!-- 



    Section Beyond VPN



-->
    <HeaderSection
      title="One Platform for Private Access & Identity"
      description="Defguard is one platform for remote access and identity that enables you to go fully private and cloud-independent. It replaces siloed tools and legacy VPN appliances with a unified solution that combines remote access, identity, and access control — ideal for teams running private or hybrid infrastructure."
      variant="gray"
    />

    <FlexibleSection
      leftRatio={0.4}
      title="Built-in Identity & SSO"
      id="security-features"
      variant="gray"
      theme="light"
    >
      <div slot="left">
        <ul>
          <li>Acts as your Identity Provider (IdP)</li>
          <li>Single Sign-On across your services</li>
          <li>Easy integration with existing apps and tools</li>
        </ul>
      </div>

      <div slot="right">
        <ImageURL src="/images/features/OIDC SSO.png" alt="Built-in OIDC SSO, key management, forward-auth for legacy systems" />
      </div>
    </FlexibleSection>

    <FlexibleSection
    leftRatio={0.6}
    title="Private cloud–ready"
    id="security-features"
    variant="gray"
    theme="light"
  >
    <div slot="left">
      <ImageURL src="/images/landing/defguard-private.png" alt="Yubico YubiKey Hardware security key management and provisioning" />
    </div>

    <div slot="right">
      <ul>
        <li>Self-host everything — including identity</li>
        <li>No third-party auth providers required or cloud dependencies</li>
        <li>Ideal for digital sovereignty and data-sensitive environments</li>
      </ul>
    </div>
  </FlexibleSection>

  <FlexibleSection
  leftRatio={0.4}
  title="Hybrid infrastructure support"
  id="security-features"
  variant="gray"
  theme="light"
>
  <div slot="left">
    <p>For organisations not ready to step down from the cloud we provide:</p>
    <ul>
      <li>integration with cloud Identity Providers</li>
      <li>support for external SSO</li>
    </ul>

  </div>

  <div slot="right">
    <ImageURL src="/images/features/Sso active dir.png" alt="Integration with SSO providers, Active Directory, and LDAP" />
  </div>
</FlexibleSection>

    <!-- <FlexibleIdentitySection /> -->

    <CTASection
      showBorder={true}
      title="Ready to Experience the Most Secure, and Compliant VPN?"
      description="Deploy our open-source WireGuard® protocol VPN in minutes and secure your remote workforce with enterprise-level features."
      buttonText="Book a Demo"
      buttonLink="/book-a-demo?utm_source=landingpage"
      id="cta-download"
      variant="gray"
    />

<!-- 



    Section Summary



-->
    <HeaderSection
      title="Real-world use cases"
      description="Defguard secure architecture approach and user friendly interface makes it a unique solution in the VPN management space."
      variant="white"
    />
    <TextDivider text="Case Studies" paddingTop="0" />
    <CaseCapsules
      cases={[
        { title: "Build private cloud security with Defguard.", link: "https://defguard.net/blog/self-hosted-vpn-private-cloud-acquinox-defguard/" },
        { title: "Replace Fortinet or Checkpoint with a lightweight, auditable stack", link: "/defguard-vs-fortinet" },
        { title: "Give contractors and remote workers secure, controlled access", link: "" }
      ]}
    />
    <TextDivider text="Testimonials" />
    <HomeSection id="testimonials" variant="white">
      <TestimonialsGrid data={testimonialsData} />
    </HomeSection>

    <CTASection
      title="Try Defguard Today – Secure Access Without the Complexity"
      description="Let your team experience the difference between a modern VPN and a legacy workaround."
      buttonText="Book a Demo"
      buttonLink="/book-a-demo?utm_source=landing"
      button2Text="Get Evaluation License"
      button2Link="/pricing?utm_source=landing#get-evaluation-license"
      id="cta-documentation"
      variant="white"
    />


    <HeaderSection
      title="Roadmap of what's to come"
      variant="gray"
    >
      <span slot="description">
        We are fully transparent also with our roadmap and feature management – here is a
        <a href="https://github.com/orgs/DefGuard/projects/5/views/1" target="_blank" rel="noopener">detailed roadmap on github</a>
      </span>
    </HeaderSection>
    <!-- <Roadmap variant="gray" /> -->

  </main>
</ProductLayout>

<style lang="scss" is:global>
  #home-page {
    --page-spacing-factor: 0.5;
    @include break-up(lg) {
      --page-spacing-factor: 1;
    }

    .flexible-content {
      padding-top: page-spacing(20px);
      padding-bottom: page-spacing(20px);

      .section-title {
        @include typography(
          section
        ); // Change back to section typography for main sections
        padding-bottom: 1rem;
        margin-bottom: 2rem;
      }

      h3 {
        @include typography(h3);
        margin-top: 0;
        margin-bottom: 1rem;
      }

      p {
        @include typography(paragraph);
        margin-bottom: 1.5rem;
      }

      .learn-more {
        margin-bottom: 1.5rem;
      }

      .learn-more-link {
        @include typography(paragraph);
          display: inline-block;
          padding: 0.75rem 1.5rem;
          background-color: var(--primary-button-bg, #0c8ce0);
          color: var(--primary-button-text, white);
          border-radius: 50px;
          font-weight: 300;
          font-size: calc(1rem * var(--font-scale-factor));
          text-decoration: none;
          transition: background-color 0.2s ease-in-out;

        &:hover {
          background-color: var(--primary-button-hover, #0a7bc5);
        }
      }

      ul {
        margin: 0 0 1.5rem 0;
        padding-left: 20px;

        li {
          @include typography(paragraph);
          margin-bottom: 0.5rem;
        }
      }

      em {
        font-size: 0.9em;
        opacity: 0.8;
      }

      .column {
        @media (max-width: 768px) {
          &.right-column {
            margin-top: 1rem;
          }
        }
      }
    }

    .scroll-section {
      padding-top: page-spacing(200px);
      padding-bottom: page-spacing(200px);
    }

    .scroll-sections {
      & > .static-slides {
        display: flex;
        flex-flow: column;
        row-gap: 64px;

        @media screen and (min-width: 1200px) {
          display: none;
        }
      }
    }

    .product-features {
      padding-top: 2rem; // Add some space after the section title

      .product-feature {
        header {
          h2 {
            @include typography(h3); // Change to h3 for better size
            font-weight: 400; // Keep it light
          }
        }
      }
    }
  }
</style>
