---
import Navigation from "../components/base/Navigation.astro";
import BuiltBy from "../components/BuiltBy.astro";
import HomeSection from "../components/home/HomeSection.astro";
import ProductLayout from "../layouts/ProductLayout.astro";
import Testimonials from "./_home/components/client-side/Testimonials/Testimonials";
import type { TestimonialData } from "./_home/components/client-side/Testimonials/type";
import { testimonialSchema } from "./_home/components/client-side/Testimonials/type";
import FlexibleIdentitySection from "./_home/components/FlexibleIdentity/FlexibleIdentitySection.astro";
import HomeHeader from "./_home/components/HomeHeader.astro";
import Roadmap from "./_home/components/Roadmap/Roadmap.astro";
import HomeScrollSection1 from "./_home/scroll-sections/section-1/HomeScrollSection1";
import HomeScrollSection2 from "./_home/scroll-sections/section-2/HomeScrollSection2";
import HomeScrollSection3 from "./_home/scroll-sections/section-3/HomeScrollSection3";
import FlexibleSection from "../components/FlexibleSection.astro";
import signinwith from "/public/images/data/signinwith.png";
import enrollment from "/public/images/data/enrollment-screen.png";
import api from "/public/images/data/api.png";
import Image from "astro/components/Image.astro";
import YouTubeVideo from "../components/video/YouTubeVideo.astro";
import CTASection from "../components/CTASection.astro";
import ProductSection from "../layouts/ProductSection.astro";
import { ProductFeature } from "../components/product/ProductFeature/ProductFeature";
const testimonialsImportData = await Astro.glob("../data/home/testimonials/**/*.md");

const testimonialsData: Array<TestimonialData> = testimonialsImportData.map((val) => {
  const toValidate = { ...val.frontmatter, markdownRaw: val.rawContent() };
  const res = testimonialSchema.parse(toValidate);
  return res;
});

const title = "defguard - Zero-Trust WireGuard® 2FA/MFA VPN";
const featuredImage =
  "github.com/DefGuard/defguard.github.io/raw/main/public/images/product/core/hero-image.png";
const imageWidth = "1920";
const imageHeight = "1080";
const url = "https://defguard.net/";
const tags = [
  "defguard",
  "open source",
  "sso & vpn",
  "vpn",
  "mfa",
  "2fa",
  "mfa/2fa",
  "wireguard",
  "ldap",
  "openldap",
  "postgresql",
  "postgres",
  "openid",
  "totp",
  "webauthn",
  "opensense",
  "freebsd",
  "rust",
  "secure",
  "desktop client",
  "desktop",
  "yubikey",
  "teonite",
  "docker",
  "kubernetes",
  "k8s",
];
---

<ProductLayout
  title={title}
  featuredImage={featuredImage}
  imageWidth={imageWidth}
  imageHeight={imageHeight}
  url={url}
  tags={tags}
>
  <Navigation activeSlug="/" />
  
  <main id="home-page">
    
    <HomeHeader />

    <FlexibleSection
      title="Upgrade to native MFA for WireGuard for Safer Remote Access"
      id="security-features"
      variant="gray"
      theme="light"
    >
      <div slot="left">
        <p>By integrating Multi-Factor Authentication (MFA) directly into the WireGuard® protocol, defguard raises the bar for VPN two factor authentication and safeguards your organization from unauthorized remote access.</p>
        <div class="learn-more">
          <a 
          href="https://docs.defguard.net/admin-and-features/features-and-configuration/wireguard/multi-factor-authentication-mfa-2fa" 
          class="learn-more-link">

            Learn more about defguard MFA architecture

          </a>
        </div>
      </div>
      
      <div slot="right">
        <h3>Benefits</h3>
        <ul>
          <li>Meets the robust security standards of the NIS2 directive for enterprise VPNs</li>
          <li>Enhances remote access security with native multi-factor authentication</li>
          <li>Streamlines security by consolidating VPN and Access Control in one platform</li>
        </ul>
      </div>
    </FlexibleSection>
    <FlexibleSection
      title="Fine-tune permissions with <strong>Enterprise Level Access Control (ACL)</strong>"
      id="acl"  
      variant="white"
      theme="light"
    >
      <div slot="left">
        <p>
          Defguard’s Access Control Lists grant each user precisely the access they need—no more, no less—while staying in sync with your identity provider. 
        </p>
        <p>
          By leveraging native firewall integrations with Linux, FreeBSD, and OPNsense, defguard enforces Zero Trust architecture with seamless network segmentation.
        </p>
        <a href="//docs.defguard.net/enterprise/all-enteprise-features/access-control-list">
          How to enable Access Control List functionality</a>
      </div>
      
      <div slot="right">
        <p>
          <em>“Having ACL and user lifecycle in one place saved us from building custom scripts or messing with separate solutions.”</em>
        </p>
        <p>
          Head of Infosec
        </p>
      </div>
    </FlexibleSection>
    <FlexibleSection
    title="Simplify your stack with defguard Identity Provider"
    id="oidc"  
    variant="gray"
    theme="light"
  >
    <div slot="left">
      <p>Leverage defguard's built-in OpenID Connect (OIDC) provider, giving you full control over user management within the defguard platform.
        </p>
        <p>
        This comprehensive approach to identity integration empowers you to centralize user authentication and authorization, streamlining remote access management and strengthening your overall security posture.</p>
        
    </div>
    
    <div slot="right">
      <Image src={signinwith} alt="sign in with defguard" />
    </div>
  </FlexibleSection>
  <FlexibleSection
  title="Sync with external Identity Providers"
  id="ldap"  
  variant="white"
  theme="light"
>
  <div slot="left">
    <strong>Google, Microsoft, Okta and other cloud providers</strong>
    <p>
      defguard seamlessly integrates with a wide range of identity providers, allowing you to easily connect to existing ecosystem of your organization. </p>
    <p>
       Ccloud-based identity providers support includes: Google, Microsoft, Okta, JumpCloud, Zitadel, or Authentik.</p>
  </div>
  
  <div slot="right">
    <strong>LDAP & Active Directory </strong>
    <p>With its robust identity provider integration capabilities, defguard enables two-way synchronization with Active Directory, ensuring your user accounts, groups and permissions are always up-to-date. 
    </p>
    <a href="https://docs.defguard.net/enterprise/all-enteprise-features/ldap-and-active-directory-integration/two-way-ldap-and-active-directory-synchronization">
      Read more : Two-way LDAP and Active Directory syn
    </a>
  </div>
  </FlexibleSection>

  <FlexibleSection
  title="Enroll users remotely & enable VPN self-configuration"
  id="enroll"  
  variant="gray"
  theme="light"
>
  <div slot="left">
    <Image src={enrollment} alt="enrollment screen" />
  </div>
  
  <div slot="right">
    <p>
      Defguard makes it easy for users to get set up and connected - without hassle or confusion. 
    </p>
    <p>
      The built-in identity provider integration allows users to securely configure their account and VPN access directly from the 
    <a href="/client">our wireguard desktop client.</a>
    </p>
    <p><strong>Defguard desktop client supports real time sync for client configurations.</strong></p>
  </div>
  </FlexibleSection>
  <FlexibleSection
  title="Consolidate Remote Access, User Management, and Permissions"
  id="remote"  
  variant="white"
  theme="light"
>
  <div slot="left">
    <p>
      defguard simplifies your enterprise security with a single solution that unifies enterprise VPN, identity (IAM), and permissions in one place—potentially saving you 20–40% on your security budget.
    </p>
  </div>
  
  <div slot="right">
    <ul>
      <li>
        <strong>Unified Permissions Governance</strong>: Define and enforce granular permissions policies across your entire organization from a single system.
      </li>
      <li>
        <strong>Reduced Administrative Overhead</strong>: Eliminate the time and resources required to manage disparate security tools, streamlining operations.
      </li>
    </ul>
  </div>
  </FlexibleSection>
  <FlexibleSection
  title="Deploy anywhere, Your way"
  id="deploy"  
  variant="gray"
  theme="light"
>
  <div slot="left">
    <p>
      Choose from Docker, Kubernetes, or traditional package installers. You’re in control of your hardware and infrastructure choices. Perfect for on-premise infrastructure and Private Cloud.
    </p>
    <a href="https://docs.defguard.net/admin-and-features/setting-up-your-instance">Deploy your instance with one-line install script</a>
  </div>
  
  <div slot="right">
    <YouTubeVideo
    videoId="MqlE6ZTn0bg"
    title="Your video title"
    showControls={true}
    showInfo={true}
    allowFullscreen={true}
    rel={false}
  />
  </div>
  </FlexibleSection>
  <FlexibleSection
  title="Automate and integrate with defguard API"
  id="api"  
  variant="white"
  theme="light"
>
  <div slot="left">
    <Image src={api} alt="logo image" />
  </div>
  
  <div slot="right">
    <p>Use our comprehensive API and webhooks to automate processes, track changes, or integrate with existing systems.
    </p>
    <div class="learn-more">
      <a href="https://docs.defguard.net/enterprise/all-enteprise-features/api-tokens" class="learn-more-link">Explore API documentation</a>
    </div>
  </div>
  </FlexibleSection>
  <FlexibleSection
  title="Retain Complete Ownership of Your Data"
  id="yourdata"  
  variant="gray"
  theme="light"
>
  <div slot="left">
    <p>
      On-prem or private-cloud deployments meet strict <em>Data Sovereignty</em> demands in finance, healthcare, government and other critical sector.
    </p>
  </div>
  
  <div slot="right">
    <p>open code, on-prem architecture, integrated IdP and SSO makes defguard perfect solution for organisations seeking true sover
    </p>
    <p>
      <a href="#">read more → how defguard guaranties Data Sovereignity</a>
    </p>
  </div>
  </FlexibleSection>

  <FlexibleSection
  title="Meet compliance (SOC 2 and HIPAA) requirements"
  id="compliance"  
  variant="white"
  theme="light"
>
  <div slot="left">
    <p>
      With Extended logging and local data storage defguard simplifies addressing compliance teams through and gives you the ability to demonstrate <em>behind-firewall auditing.</em>
    </p>
    <p>
      <a href="https://docs.defguard.net/in-depth/architecture">in depth defguard architecture</a>
    </p>
  </div>
  
  <div slot="right">
    <ul>
      <li><strong>NIS2 Compliant</strong><br />
      Built-in WireGuard MFA aligns with mandatory cybersecurity requirements.</li>
      <li><strong>FIPS 140-2 Ready</strong><br />  
      Coming soon for organizations that need advanced cryptographic compliance.</li>   
      <li><strong>Open Source</strong><br />
      Full transparency for security audits, custom development, and trust in your VPN.</li>
    </ul>
  </div>
  </FlexibleSection>
  <FlexibleIdentitySection />
    <!-- <HomeSection className="scroll-section" variant="white">
      <Fragment>
        <HomeScrollSection1 client:idle />
      </Fragment>
    </HomeSection>
    <FlexibleIdentitySection />
    <HomeSection className="scroll-section" variant="white">
      <Fragment>
        <HomeScrollSection2 client:idle />
      </Fragment>
    </HomeSection> -->
    <!-- <HomeSection className="scroll-section" variant="gray">
      <Fragment>
        <HomeScrollSection3 client:idle />
      </Fragment>
    </HomeSection> -->
    
    <CTASection
      title="Ready to Experience the Most Secure, Flexible, and Compliant WireGuard VPN?"
      description="Deploy our open-source VPN in minutes and secure your remote workforce with enterprise-level features."
      buttonText="Get Started"
      buttonLink="/download"
      id="cta-download"
      variant="white"
    />

    
    <HomeSection id="testimonials" variant="gray">
      <Testimonials data={testimonialsData} client:only="react" />
    </HomeSection>

    <Roadmap variant="white"/>
    <!-- <ProductSection padding="small" variant="gray">
      <div class="flexible-content">
        <h2 class="section-title">How It Works</h2>
      </div>
      <div class="product-features">
        <ProductFeature title="1. Deploy Quickly" id={0} context="how-it-works" client:load>
          <p>Spin up defguard in minutes via Docker, Kubernetes, or your preferred package installer.</p>
        </ProductFeature>
        
        <ProductFeature title="2. Connect Your Identity Providers" id={1} context="how-it-works" client:load>
          <p>Effortlessly sync users, groups, and credentials with LDAP, Active Directory, and popular cloud IdPs.</p>
        </ProductFeature>
        
        <ProductFeature title="3. Enable True Multi-Factor Authentication" id={2} context="how-it-works" client:load>
          <p>Protect your remote access with the world's first WireGuard MFA, either through built-in or external identity providers.</p>
        </ProductFeature>
        
        <ProductFeature title="4. Onboard Users Instantly" id={3} context="how-it-works" client:load>
          <p>Provide a simple, secure enrollment link. Users set up their credentials in the desktop client and gain immediate access to critical resources.</p>
        </ProductFeature>
        
        <ProductFeature title="5. Manage & Control via ACL" id={4} context="how-it-works" client:load>
          <p>Grant granular permissions and monitor user activities through defguard's intuitive dashboard.</p>
        </ProductFeature>
      </div>
    </ProductSection> -->
    
    <!-- <BuiltBy variant="white" /> -->
  </main>
</ProductLayout>

<style lang="scss" is:global>
  #home-page {
    --page-spacing-factor: 0.5;
    @include break-up(lg) {
      --page-spacing-factor: 1;
    }

    .flexible-content {
      padding-top: page-spacing(80px);
      padding-bottom: page-spacing(80px);
      
      .section-title {
        @include typography(section);  // Change back to section typography for main sections
        border-bottom: 1px solid var(--text-body-primary);
        padding-bottom: 1rem;
        margin-bottom: 2rem;
      }
      
      h3 {
        @include typography(h3);
        margin-top: 0;
        margin-bottom: 1rem;
      }
      
      p {
        @include typography(paragraph);
        margin-bottom: 1.5rem;
      }
      
      .learn-more {
        margin-bottom: 1.5rem;
      }

      .learn-more-link {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background-color: var(--primary-button-bg, #0C8CE0);
        color: var(--primary-button-text, white);
        border-radius: 6px;
        font-weight: 600;
        text-decoration: none;
        transition: background-color 0.2s ease-in-out;
        
        &:hover {
          background-color: var(--primary-button-hover, #0A7BC5);
        }
      }
      
      ul {
        margin: 0 0 1.5rem 0;
        padding-left: 20px;
        
        li {
          @include typography(paragraph);
          margin-bottom: 0.5rem;
        }
      }
      
      em {
        font-size: 0.9em;
        opacity: 0.8;
      }
      
      .column {
        @media (max-width: 768px) {
          &.right-column {
            margin-top: 1rem;
          }
        }
      }
    }

    #testimonials {
      padding-top: page-spacing(100px);
      padding-bottom: page-spacing(100px);
    }

    .scroll-section {
      padding-top: page-spacing(200px);
      padding-bottom: page-spacing(200px);
    }

    .scroll-sections {
      & > .static-slides {
        display: flex;
        flex-flow: column;
        row-gap: 64px;

        @media screen and (min-width: 1200px) {
          display: none;
        }
      }
    }

    .product-features {
      padding-top: 2rem;  // Add some space after the section title
      
      .product-feature {
        header {
          h2 {
            @include typography(h3);  // Change to h3 for better size
            font-weight: 400;  // Keep it light
          }
        }
      }
    }
  }
</style>
