---
import Navigation from "../components/base/Navigation.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import { DownloadButtonList } from "../components/download/DownloadButtonList/DownloadButtonList";
import DownloadVersion from "../components/download/DownloadVersion.astro";
import DefguardInfo from "../components/download/DownloadInfo/DownloadInfo";
import NewsletterSection from "../components/NewsletterSection.astro";
import ProductSection from "../layouts/ProductSection.astro";
import FlexibleSection from "../components/FlexibleSection.astro";
import StoreButtons from "../components/buttons/StoreButtons.astro";
import QRCodeStoreToggle from "../components/buttons/QRCodeStoreToggle.astro";
import ContentLimiter from "../components/ContentLimiter.astro";

const title = "defguard - Zero-Trust WireGuard® 2FA/MFA VPN: Download";
const featuredImage =
  "github.com/DefGuard/defguard.github.io/raw/main/public/images/png/defguard.png";
const imageWidth = "1080";
const imageHeight = "540";
const description =
  "defguard - enterprise open-source SSO&VPN - the only open-source solution with real WireGuard® MFA/2FA & integrated OpenID Connect SSO";
const url = "https://defguard.net/download/";
---

<BaseLayout
  title={title}
  description={description}
  featuredImage={featuredImage}
  imageWidth={imageWidth}
  imageHeight={imageHeight}
  url={url}
>
  <Navigation activeSlug="/download/" />
  <main id="download-page">
    <ProductSection padding="none">
      <FlexibleSection
        title="Download Defguard client with WireGuard® 2FA/MFA"
        id="download-section"
        variant="white"
        theme="light"
      >
        <div slot="left">
          <h2 style="padding-top: 2rem;">Desktop Clients</h2>
          <DefguardInfo owner="Defguard" repo="client" client:only="react" />
          <DownloadButtonList client:only="react" />
        </div>

        <div
          slot="right"
          style="background-color: #fff; padding: 2rem; border-radius: 10px;"
        >
          <h2>Mobile Clients</h2>
          <p>
            Defguard for mobile is available now. Please use the following links:
            <ul>
              <li>
                <a href="https://apps.apple.com/us/app/defguard-vpn-client/id6748068630"
                  >Defguard Mobile for iOS</a
                >
              </li>
              <li>
                <a
                  href="https://play.google.com/store/apps/details?id=net.defguard.mobile"
                  >Defguard Mobile for Android</a
                >
              </li>
            </ul>
          </p>

          {/* Example: QR code toggle for mobile app stores (placeholder images) */}
          <!-- <QRCodeStoreToggle /> -->
          <!-- <NewsletterSection
              headerLevel="2"
              title="Stay Updated on New Releases"
              description="Release notes and occasional news — no spam, just one email per month max."
          />   -->
        </div>
      </FlexibleSection>
      <!-- <FlexibleSection
        id="newsletter"
        variant="white"
        theme="light"
      >
        <div slot="left">
          <NewsletterSection
            headerLevel="2"
            title="Stay Updated on New Releases"
            description="Release notes and occasional news — no spam, just one email per month max."
          />
        </div>
        <div slot="right"></div>
      </FlexibleSection> -->
      <ContentLimiter>
        <div
          style="width: 100%; display: flex; flex-direction: column; align-items: center; padding-bottom:4rem; padding-top:2rem; margin-top:2rem; border-top:1px solid #e8e8e8;"
        >
          <div
            style="width: 100%; max-width: 720px; display: flex; flex-direction: column; align-items: center;"
          >
            <NewsletterSection
              headerLevel="2"
              title="Stay Updated on New Releases"
              description="Release notes and occasional news — no spam, just one email per month max."
            />
          </div>
        </div>
      </ContentLimiter>
    </ProductSection>
  </main>
</BaseLayout>

<style lang="scss" is:global>
  .store-buttons {
    margin-bottom: 3rem !important;
  }
  .store-badge {
    height: 80px !important;
    padding: 0 20px;
    @include break-down(lg) {
      padding: 0;
    }
  }
  .btn.size-normal {
    margin: 0 0 0 auto;
    min-height: unset !important;
    height: 38px;
    border-radius: unset;
    width: 100%;

    @include break-down(lg) {
      margin: 0 auto;
    }
  }
  .btn {
    border-color: var(--text-button-tertiary);

    &:hover {
      border: unset;
      background-color: var(--text-button-tertiary);

      span {
        color: white;
      }
    }
  }

  #download-page {
    display: flex;
    flex-direction: column;
    gap: 40px;

    h1 {
      @include typography(section);
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    .product-section {
      padding-top: 0 !important;
      padding-bottom: 0rem !important;
      border: none;
      display: unset;
      h1 {
        @include break-down(md) {
          padding-top: 20px;
          border-top: 1px solid black;
        }
      }
    }

    @include break-down(sm) {
      gap: 50px;
    }
  }
</style>
