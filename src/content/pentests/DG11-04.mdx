---
linked_github_issue: DG11-04
title: Misleading user data display in admin panel
status: Completed
severity: Medium
issue_link: https://github.com/DefGuard/defguard/issues/1516
---

### Technical Details

The administrative dashboard displays a user's creation date and last login date. However, during testing, it was discovered that these fields are being populated with incorrect timestamps. The issue seems to stem from a timezone conversion error, where the server-side timestamp (stored in UTC) is not correctly converted to the local timezone of the administrator's browser. This leads to dates being off by several hours, or even a full day, depending on the admin's location.

This can cause:
* **Operational confusion:** Administrators may make incorrect decisions based on misleading information about user activity.
* **Audit trail inaccuracies:** The incorrect data could lead to problems during security audits or investigations where precise timestamps are critical.

---

### Proof of Concept

1. Log in to the Defguard admin panel with an account located in a different timezone than the server (e.g., server in UTC, admin in EST).
2. Navigate to the user management section and view a user's profile.
3. Observe the `Created At` and `Last Login` fields. They will show a time that does not match the actual time the actions occurred, usually being off by the timezone offset.

---

### Recommendations

* **Standardize timezone handling:** Ensure all date and time data is consistently stored in **UTC** on the server.
* **Properly localize timestamps:** When displaying timestamps in the frontend, use a library (like `moment.js` or `date-fns`) to convert the UTC time to the administrator's local timezone.
* **Verify conversion logic:** Review and test the timezone conversion logic thoroughly to ensure it correctly handles daylight saving time and various timezone offsets.